---
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';
import { getEntryBySlug } from 'astro:content';

const { slug } = Astro.params;
const entry = await getEntryBySlug('docs', slug);

// Redirect to 404 if it's a production build and the page is a draft
if (import.meta.env.PROD && entry.data.draft) {
  return Astro.redirect('/404');
}
---

<StarlightPage {...Astro.props}><slot /></StarlightPage>