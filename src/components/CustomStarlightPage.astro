---
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';
import { getEntry } from 'astro:content';

const { slug } = Astro.params;
const entry = await getEntry('docs', slug);

// Check if we're in production and if the page is a draft
if (import.meta.env.PROD && entry.data.draft) {
  return Astro.redirect('/404');
}
---

<StarlightPage {...Astro.props}><slot /></StarlightPage>